# 校园一卡通消费管理系统

基于C++实现的校园一卡通消费管理系统，支持账户管理、充值、消费、查询及报表输出等功能，采用模块化设计和异常处理机制确保系统健壮性。


## 项目功能

1. **账户管理**：支持批量录入学生信息（学号、姓名、初始余额），动态内存管理
2. **充值功能**：支持金额充值并自动扣除2%手续费
3. **消费功能**：支持指定消费项目扣款，自动校验余额是否充足
4. **信息查询**：查询指定用户余额、学号等信息
5. **报表输出**：格式化显示所有用户的账户信息及交易记录
6. **异常处理**：处理无效输入、余额不足、内存分配失败等异常情况


## 项目结构

```
CampusCardSystem/
├─ card_operations.h    // 结构体定义、函数声明
├─ card_operations.cpp  // 核心功能实现
└─ CampusCardSystem.cpp // 主程序入口、菜单交互
```


## 编译与运行

### 环境要求
- Windows/macOS/Linux系统
- 支持C++11及以上标准的编译器（如GCC、Clang、MSVC）
- Visual Studio 2022（推荐）

### 编译命令（以GCC为例）
```bash
g++ CampusCardSystem.cpp card_operations.cpp -o campus_card -std=c++11
```

### 运行
```bash
# Windows
campus_card.exe
# Linux/macOS
./campus_card
```


## 使用说明

1. 启动程序后，首先输入学生数量并录入用户信息（学号、姓名、初始余额）
2. 通过菜单选择操作（1-充值、2-消费、3-查余额、4-查学号、5-打印报表、0-退出）
3. 执行操作前需输入目标用户的学号，系统会自动验证用户是否存在
4. 所有金额相关操作会自动校验合法性（如拒绝负数金额）


## 核心技术点

- **模块化设计**：分离声明与实现，提高代码复用性和可维护性
- **动态内存管理**：使用`new[]`/`delete[]`实现灵活的账户数量管理
- **异常处理**：通过`try-catch`机制处理输入错误、余额不足等异常情况
- **常量控制**：使用`const`引用和指针保护数据不被意外修改
- **格式化输出**：通过`iomanip`库实现对齐的报表展示


## 示例截图

### 初始化界面
```
============================
===== Campus Card System =====
============================
请输入学生数量: 2
请输入学号、姓名和初始余额: 1001 张三 50
请输入学号、姓名和初始余额: 1002 李四 30
初始化完成！
```

### 菜单操作
```
----------------------------
===== 操作菜单 =====
1. 充值
2. 消费
3. 查看余额
4. 查看学号
5. 打印所有用户报表
0. 退出系统
----------------------------
请选择操作(0-5): 1
```

### 充值操作
```
请输入操作的学号: 1001
请输入充值金额: 100
充值成功！当前余额（已扣除服务费）: 148.00
```

### 消费操作
```
请输入操作的学号: 1001
请输入消费项目: 食堂晚餐
请输入消费金额: 15
消费项目: 食堂晚餐
当前余额: 133.00
```

### 报表输出
```
============================
ID      Name        Balance    Transactions
----------------------------
1001    张三           133.00             2
1002    李四            30.00             0
============================
```
